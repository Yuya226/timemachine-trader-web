{% extends "base.html" %}

{% block title %}å†’é™ºè€…ã‚®ãƒ«ãƒ‰ - ã‚¿ã‚¤ãƒ ãƒã‚·ãƒ³ãƒ»ãƒˆãƒ¬ãƒ¼ãƒ€ãƒ¼{% endblock %}

{% block content %}
<div style="padding: 24px 0;">
    <header class="header">
        <h1>å†’é™ºè€…ã‚®ãƒ«ãƒ‰</h1>
    </header>
    
    <!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ -->
    <div class="status-bar">
        <div class="status-item">
            <span class="status-icon">{{ class_info.icon }}</span>
            <div>
                <div class="status-value">Lv.{{ profile.level }}</div>
                <div class="status-label">{{ class_info.japanese_name }}</div>
            </div>
        </div>
        <div class="status-item">
            <span class="status-icon">ğŸ’°</span>
            <div>
                <div class="status-value">{{ "{:,}".format(profile.gold) }}</div>
                <div class="status-label">ã‚´ãƒ¼ãƒ«ãƒ‰</div>
            </div>
        </div>
    </div>
    
    <!-- XPãƒãƒ¼ -->
    <div class="card" style="padding: 16px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
            <span style="font-size: 0.875rem; color: var(--muted);">çµŒé¨“å€¤</span>
            <span style="font-size: 0.875rem; color: var(--gold);">{{ profile.xp }} / {{ profile.xp_to_next_level }} XP</span>
        </div>
        <div class="xp-bar-bg">
            <div class="xp-bar-fill" style="width: {{ (profile.xp / profile.xp_to_next_level) * 100 }}%"></div>
        </div>
    </div>
    
    <!-- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚°ãƒªãƒƒãƒ‰ -->
    <div class="menu-grid">
        <a href="/dungeons" class="menu-item">
            <span class="menu-icon">ğŸ°</span>
            <span class="menu-label">ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³</span>
        </a>
        <a href="/equipment" class="menu-item">
            <span class="menu-icon">âš”ï¸</span>
            <span class="menu-label">è£…å‚™</span>
        </a>
        <a href="/profile" class="menu-item">
            <span class="menu-icon">ğŸ‘¤</span>
            <span class="menu-label">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</span>
        </a>
        <form action="/reset" method="post" style="display: contents;">
            <button type="submit" class="menu-item" style="border: none; cursor: pointer;" onclick="return confirm('æœ¬å½“ã«ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ')">
                <span class="menu-icon">ğŸ”„</span>
                <span class="menu-label">ãƒªã‚»ãƒƒãƒˆ</span>
            </button>
        </form>
    </div>
    
    <!-- ã‚¯ãƒªã‚¢çŠ¶æ³ -->
    <div class="card">
        <h3 style="font-size: 1rem; margin-bottom: 12px;">ğŸ“Š å†’é™ºã®è¨˜éŒ²</h3>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; text-align: center;">
            <div>
                <div style="font-size: 1.5rem; font-weight: 700; color: var(--success);">{{ profile.completed_dungeons|length }}</div>
                <div style="font-size: 0.75rem; color: var(--muted);">ã‚¯ãƒªã‚¢æ•°</div>
            </div>
            <div>
                <div style="font-size: 1.5rem; font-weight: 700; color: var(--primary);">{{ profile.total_trades }}</div>
                <div style="font-size: 0.75rem; color: var(--muted);">ç·å–å¼•æ•°</div>
            </div>
            <div>
                <div style="font-size: 1.5rem; font-weight: 700; {% if profile.total_profit >= 0 %}color: var(--success);{% else %}color: var(--error);{% endif %}">
                    {% if profile.total_profit >= 0 %}+{% endif %}{{ "{:,.0f}".format(profile.total_profit) }}
                </div>
                <div style="font-size: 0.75rem; color: var(--muted);">ç´¯è¨ˆæç›Š</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
